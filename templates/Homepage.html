{% extends 'base_user.html' %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/Homepage.css') }}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
{% endblock %}

{% block title %}MMU Event{% endblock %}

{% block content %}


<div class="slideshow-container">
    {% for event in event_images %}
    <div class="mySlides fade">
      <img src="{{ url_for('static', filename='images/' ~ event.event_img) }}" style="width:100%" class="event-cover">
    </div>
    {% endfor %}
  
    <div class="slideshow-controls">
      <button id="prevBtn" onclick="prevSlide()"> < </button>
      <button id="nextBtn" onclick="nextSlide()"> > </button>
    </div>
  </div>
  
  
  <script>
    let slideIndex = 1; // Start from the first slide
    let autoSlide;
    
    // Function to initialize slideshow
    showSlides();
    
    function showSlides() {
        let slides = document.getElementsByClassName("mySlides");
        
        // Hide all slides
        for (let i = 0; i < slides.length; i++) {
            slides[i].style.display = "none";  
        }
        
        // Display the current slide
        slides[slideIndex - 1].style.display = "block";  
        
        clearTimeout(autoSlide);
        autoSlide = setTimeout(nextSlide, 4000); 
    }
    
    function nextSlide() {
        let slides = document.getElementsByClassName("mySlides");
        slideIndex++;
        if (slideIndex > slides.length) { slideIndex = 1 } 
        showSlides();
    }
    
    function prevSlide() {
        let slides = document.getElementsByClassName("mySlides");
        slideIndex--;
        if (slideIndex < 1) { slideIndex = slides.length }
        showSlides();
    }
    </script>
  
  <div class="event-slider-container" id="eventSliderContainer">
    <h2>Upcoming Events</h2>
    <div class="event-slider" id="eventSlider">
      {% for event in events[:3] %} {# Limiting to first three events #}
      <div class="event-container">
        <div class="event-img parallax">
          <img src="{{ url_for('static', filename='images/' ~ (event.event_img or 'default_poster.png')) }}" alt="{{ event.event_name }}" class="event-cover">
        </div>
        <div class="event-details">
          <h3>{{ event.event_name }}</h3>
          <button class="view-details-btn" onclick="viewDetails({{ event.event_id }})">View Details</button>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
  
  <div class="event-slider-container" id="newEventSliderContainer">
    <h2>New Events</h2>
    <div class="event-slider" id="newEventSlider">
      {% for event in events[5:8] %}
      <div class="event-container">
        <div class="event-img parallax">
          <img src="{{ url_for('static', filename='images/' ~ (event.event_img or 'default_poster.png')) }}" alt="{{ event.event_name }}" class="event-cover">
        </div>
        <div class="event-details">
          <h3>{{ event.event_name }}</h3>
          <button class="view-details-btn" onclick="viewDetails({{ event.event_id }})">View Details</button>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>

{% endblock %}
